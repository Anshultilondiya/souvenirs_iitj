<script>
    google.script.run.withSuccessHandler(yearbtn).Yearbtn(); // This function call is gets a returned array from Yearbtn and put the returned array in yearbtn function as first variable.

    let LatestFolderId = ' '; // This variable is created for holding Folder Id of first child of ".dropdown-menu" class. 
    // yearbtn Function appends dropdown items in "dropdown-menu" class. These dropdown items are Folders inside "Organised Folder" in drive   
    function yearbtn(returnedArray_from_Yearbtn) {
        const [FolderName, FolderId] = returnedArray_from_Yearbtn;
        for (i = 0; i < FolderName.length; i++) {
            Folder = FolderName[i];
            $(".dropdown-menu").append("<p class ='dropdown-item'" + "onclick =" + "FolderCounter('" + FolderId[i] +
                "')" + ">" + Folder + "</p>");
        };

        LatestFolderId = FolderId[0];
        // Folder Id of first child set into LatestFolderId Variable
        FolderCounter(LatestFolderId);
        // Function call for showing default event folders on home page ("Default Event Folder are the folders inside first child of "dropdown" class") 
    };

    // FolderCounter takes FolderId of Year Folder that is present in dropdown menu.
    // Remove all previously present cards inside cards-holder class.
    // executes CardsDisplay and pass its returned values of CardsDisplay in Show_Folders
    function FolderCounter(FolderId) {
        $(".cards-holder").empty();

        google.script.run.withSuccessHandler(Show_Folders).CardsDisplay(FolderId);

    };

    //Show_Folders Function Appends cards in Album.
    function Show_Folders(returnedArray_from_CardsDisplay) {
        let [FolderName, FolderId] = returnedArray_from_CardsDisplay;
        for (i = 0; i < FolderName.length; i++) {
            Folder = FolderName[i];
            $(".cards-holder").append(
                "<div class='card-warper'>" +
                "<div class='card'>" +
                "<div class='view overlay'>" +
                "<img class='card-img-top' src='https://mdbootstrap.com/img/Photos/Others/images/16.jpg'alt='Card image cap'>" +
                "</div>" +
                "<div class='card-body'>" +
                "<div class='card-title'><h3>" + Folder + "</h3></div>" +
                "<button type='button' class='btn btn-light-blue btn-md'" + "onclick =" + "doStuff('" + FolderId[i] + "')" + ">Open Album</button></div></div></div>"
            );
        };
    };


    // for breadcrumb
    // These array stores Id and Names of elements inside Breadcrumb
    var Idarray = [];
    var Namearray = [];
    // updateBreadCrumb Function take a array input from getData function in Code.gs
    // First checks whether the clicked folder is present in breadcrumb if ("yes" then it remove all elements and render elements till the name of folder clicked ) else ( appends new element in breadcrumb)
    function updateBreadCrumb(arg) {
        if (Idarray.includes(arg[0])) {

            var ind = Idarray.indexOf(arg[0]);
            Idarray = Idarray.slice(0, ind + 1);
            Namearray = Namearray.slice(0, ind + 1);
            $("#list").empty();
            $("#list").append("<li onclick='gohome()' class='breadcrumb-item active'>Home</li>");
            for (i = 0; i < Idarray.length; i++) {
                $("#list").append(
                    "<li onclick=" + "doStuff('" + Idarray[i] + "')  class='breadcrumb-item active'>" + Namearray[
                    i] + "</li>");
            }

        } else {

            Idarray.push(arg[0]);
            Namearray.push(arg[1]);
            $("#list").empty();
            $("#list").append("<li onclick='gohome()' class='breadcrumb-item active'>Home</li>");
            for (i = 0; i < Idarray.length; i++) {
                $("#list").append(
                    "<li onclick=" + "doStuff('" + Idarray[i] + "')  class='breadcrumb-item active'>" + Namearray[
                    i] + "</li>");
            }

        }

        $("#list li").last().addClass("disabled");
        document.getElementById("event-after-home").innerHTML = Namearray[0];
    }


    // Adding Functionality to Home element in breadcrumb
    function gohome() {
        $("#Home").removeClass("hide");
        $("#Home").addClass("show");
        $("#header").addClass("header");
        $(".welcome").css("display", "block");
        $(".navbar").removeClass("bg-colored");
        $("#Event").css("display", "none");
        $("#form").css("display", "block");
        $(".fetchedPage").remove();
        $(".FolderView").empty();
        FolderCounter(LatestFolderId);
        Idarray.length = 0;
        Namearray.length = 0;
        $("#list").empty();
        $("#list").append("<li onclick='gohome()' class='breadcrumb-item active'>Home</li>");
        document.getElementById("event-after-home").innerHTML = '';
        $(".header").css("background-image",
            "url('https://drive.google.com/uc?export=download&id=1e1_S5mjjyM6nhtRyp5MAO4jKf3CSlu3X')");
    }


    //  Adding Functionality to back button
    function goback() {
        var prev = Idarray[Idarray.length - 2];
        if (prev === undefined) {
            $("#Home").removeClass("hide");
            $("#Home").addClass("show");
            $("#header").addClass("header");
            $(".welcome").css("display", "block");
            $(".navbar").removeClass("bg-colored");
            $("#Event").css("display", "none");
            $("#form").css("display", "block");
            $(".fetchedPage").remove();
            $(".FolderView").empty();
            FolderCounter(LatestFolderId);
            Idarray.length = 0;
            Namearray.length = 0;
            $("#list").empty();
            $("#list").append("<li onclick='gohome()' class='breadcrumb-item active'>Home</li>");
            document.getElementById("event-after-home").innerHTML = '';
            $(".header").css("background-image",
                "url('https://drive.google.com/uc?export=download&id=1e1_S5mjjyM6nhtRyp5MAO4jKf3CSlu3X')");

        } else {
            doStuff(prev.toString());
        }

    }

    // Adding Functionality to Home button on Nav Bar
    $(".home-btn").click(function () {
        $("#Home").removeClass("hide");
        $("#Home").addClass("show");
        $("#header").addClass("header");
        $(".welcome").css("display", "block");
        $(".navbar").removeClass("bg-colored");
        $("#form").css("display", "block");
        $("#Event").css("display", "none");
        FolderCounter(LatestFolderId);
    });



</script>